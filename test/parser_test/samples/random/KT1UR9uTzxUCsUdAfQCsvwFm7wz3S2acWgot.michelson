parameter (pair %addItem (nat %amount) (pair (address %from_) (nat %token_id))); storage (pair (address %items_contract_address) (address %items_wallet_address)); code { UNPAIR ; NIL operation ; DUP 3 ; CAR ; CONTRACT %transfer (list (pair address (list (pair address (pair nat nat))))) ; IF_NONE { PUSH int 28 ; FAILWITH } {} ; PUSH mutez 0 ; NIL (pair address (list (pair address (pair nat nat)))) ; NIL (pair address (pair nat nat)) ; DIG 5 ; DUP ; CAR ; SWAP ; DUP ; DUG 7 ; GET 4 ; DUP 9 ; CDR ; PAIR 3 ; CONS ; DIG 5 ; GET 3 ; PAIR ; CONS ; TRANSFER_TOKENS ; CONS ; PAIR }