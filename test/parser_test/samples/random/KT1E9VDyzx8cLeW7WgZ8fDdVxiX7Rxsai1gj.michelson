parameter (unit %default); storage (pair (address %registry) (address %v1_and_legacy_adapter)); view "get_royalties" (pair (address %fa2) (nat %id)) (pair (nat %total) (map %shares address nat)) { UNPAIR ; SWAP ; DUP ; DUG 2 ; CAR ; SWAP ; DUP ; DUG 2 ; CAR ; VIEW "get_royalties_type" nat ; IF_NONE { UNIT ; FAILWITH } {} ; DUP ; PUSH nat 2 ; COMPARE ; EQ ; IF { DROP ; SWAP ; DROP ; UNPAIR ; SWAP ; VIEW "get_royalties" (pair (nat %total) (map %shares address nat)) ; IF_NONE { UNIT ; FAILWITH } {} } { DIG 2 ; CDR ; SWAP ; DIG 2 ; PAIR ; VIEW "get_royalties" (pair (nat %total) (map %shares address nat)) ; IF_NONE { UNIT ; FAILWITH } {} } }; code { UNIT ; FAILWITH }