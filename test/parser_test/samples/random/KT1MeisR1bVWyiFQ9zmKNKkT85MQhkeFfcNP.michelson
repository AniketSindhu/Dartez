parameter unit; storage (pair (map %bytes_to_string bytes string) (big_map %metadata string bytes)); view "string_from_bytes" bytes string { UNPAIR ; DUP ; PUSH string "" ; PUSH nat 0 ; DUP 3 ; SIZE ; DUP ; DUP 3 ; COMPARE ; LT ; LOOP { DUP 6 ; CAR ; DUP 5 ; PUSH nat 1 ; DUP 5 ; SLICE ; IF_NONE { PUSH int 277 ; FAILWITH } {} ; GET ; IF_NONE { PUSH int 277 ; FAILWITH } {} ; DIG 3 ; CONCAT ; DUG 2 ; PUSH nat 1 ; DIG 2 ; ADD ; SWAP ; DUP ; DUP 3 ; COMPARE ; LT } ; DROP 2 ; SWAP ; DROP ; SWAP ; DROP ; SWAP ; DROP }; code { CDR ; NIL operation ; PAIR }