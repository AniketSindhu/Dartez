parameter (or (unit %set_balance) (nat %set_callback_nat)); storage (pair (nat %callback_nat) (nat %num_ethtz)); code { UNPAIR ; IF_LEFT { DROP ; NIL operation ; PUSH address "KT19at7rQUvyjxnZ2fBv7D9zc8rkyG7gAoU8" ; CONTRACT %getBalance (pair address (contract nat)) ; IF_NONE { PUSH int 18 ; FAILWITH } {} ; PUSH mutez 0 ; SELF %set_callback_nat ; PUSH address "tz1Piskbb5nFHcjv8nzgF8X58d1jSjab45Lm" ; PAIR ; TRANSFER_TOKENS ; CONS ; SWAP ; DUP ; CAR ; UPDATE 2 ; SWAP } { UPDATE 1 ; NIL operation } ; PAIR }