parameter (or (unit %increment) (unit %withdraw)); storage (pair (nat %number) (address %owner)); code { UNPAIR ; IF_LEFT { DROP ; PUSH mutez 1000000 ; PUSH nat 1 ; MUL ; AMOUNT ; COMPARE ; EQ ; IF {} { PUSH string "Incorrect tez sent" ; FAILWITH } ; DUP ; CAR ; PUSH nat 1 ; ADD ; UPDATE 1 ; NIL operation } { DROP ; DUP ; CDR ; SENDER ; COMPARE ; EQ ; IF {} { PUSH string "Only the contract owner can withdraw funds" ; FAILWITH } ; NIL operation ; DUP 2 ; CDR ; CONTRACT unit ; IF_NONE { PUSH int 20 ; FAILWITH } {} ; BALANCE ; UNIT ; TRANSFER_TOKENS ; CONS } ; PAIR }