parameter (or (int %addRecord) (pair %addRecordAdmin (address %account) (int %amount))); storage (pair (address %admin) (map %registry address int)); code { UNPAIR ; IF_LEFT { SWAP ; DUP ; CDR ; DIG 2 ; SOME ; SENDER ; UPDATE ; UPDATE 2 } { SWAP ; DUP ; DUG 2 ; CAR ; SENDER ; COMPARE ; EQ ; IF {} { PUSH string "WrongCondition: sp.sender == self.data.admin" ; FAILWITH } ; SWAP ; DUP ; CDR ; DUP 3 ; CDR ; SOME ; DIG 3 ; CAR ; UPDATE ; UPDATE 2 } ; NIL operation ; PAIR }