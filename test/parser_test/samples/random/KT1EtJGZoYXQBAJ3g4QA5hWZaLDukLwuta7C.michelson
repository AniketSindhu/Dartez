parameter (pair %update (string %color) (nat %pixel)); storage (pair (big_map %pixels nat string) (big_map %users_times address timestamp)); code { UNPAIR ; SWAP ; DUP ; DUG 2 ; CDR ; SENDER ; MEM ; IF { NOW ; PUSH int 120 ; DUP 4 ; CDR ; SENDER ; GET ; IF_NONE { PUSH int 28 ; FAILWITH } {} ; ADD ; COMPARE ; LT ; IF {} { PUSH string "TOO_SOON" ; FAILWITH } } {} ; SWAP ; DUP ; CDR ; NOW ; SOME ; SENDER ; UPDATE ; UPDATE 2 ; DUP ; CAR ; DUP 3 ; CAR ; SOME ; DIG 3 ; CDR ; UPDATE ; UPDATE 1 ; NIL operation ; PAIR }